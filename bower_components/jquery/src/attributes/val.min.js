define(["../core","../core/stripAndCollapse","./support","../core/nodeName","../core/init"],function(e,t,n,o){"use strict";e.fn.extend({val:function(t){var n,o,r,i=this[0];{if(arguments.length)return r=e.isFunction(t),this.each(function(o){var i;1===this.nodeType&&(null==(i=r?t.call(this,o,e(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=e.map(i,function(e){return null==e?"":e+""})),(n=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,i,"value")||(this.value=i))});if(i)return(n=e.valHooks[i.type]||e.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(o=n.get(i,"value"))?o:(o=i.value,"string"==typeof o?o.replace(/\r/g,""):null==o?"":o)}}}),e.extend({valHooks:{option:{get:function(n){var o=e.find.attr(n,"value");return null!=o?o:t(e.text(n))}},select:{get:function(t){var n,r,i,a=t.options,l=t.selectedIndex,s="select-one"===t.type,u=s?null:[],c=s?l+1:a.length;for(i=l<0?c:s?l:0;i<c;i++)if(((r=a[i]).selected||i===l)&&!r.disabled&&(!r.parentNode.disabled||!o(r.parentNode,"optgroup"))){if(n=e(r).val(),s)return n;u.push(n)}return u},set:function(t,n){for(var o,r,i=t.options,a=e.makeArray(n),l=i.length;l--;)((r=i[l]).selected=e.inArray(e.valHooks.option.get(r),a)>-1)&&(o=!0);return o||(t.selectedIndex=-1),a}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){if(Array.isArray(n))return t.checked=e.inArray(e(t).val(),n)>-1}},n.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});